(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{343:function(o,t,v){"use strict";v.r(t);var _=v(13),i=Object(_.a)({},(function(){var o=this,t=o._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[t("h1",{attrs:{id:"登录流程修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录流程修改"}},[o._v("#")]),o._v(" 登录流程修改")]),o._v(" "),t("p",[t("strong",[o._v("模板默认的登录流程（前公司也是这样的）:")])]),o._v(" "),t("ol",[t("li",[o._v("请求login登录校验")]),o._v(" "),t("li",[o._v("获取token，存放到cookie")]),o._v(" "),t("li",[o._v("用户进入管理平台，根据token请求user/info接口，获取用户的信息")]),o._v(" "),t("li",[o._v("用户登出，调用logout接口")]),o._v(" "),t("li",[o._v("store的action进行用户信息的清除")])]),o._v(" "),t("p",[t("strong",[o._v("jshERP的登录流程：")])]),o._v(" "),t("ol",[t("li",[t("p",[o._v("请求login登录校验")])]),o._v(" "),t("li",[t("p",[o._v("获取token以及用户信息")])]),o._v(" "),t("li",[t("p",[o._v("持久化信息至localStorage（管理storage使用Vue.ls）")]),o._v(" "),t("p",[o._v("注意：由于没有userinfo接口，所以必须持久化用户信息，才能记录用户的登录状态。再permission的路由拦截器中，增加一个校验，如果userinfo丢了，就必须重新登录。")])]),o._v(" "),t("li",[t("p",[o._v("用户登出，调用logout接口")])]),o._v(" "),t("li",[t("p",[o._v("store的action进行用户信息的清除")])])]),o._v(" "),t("p",[t("strong",[o._v("登录模块修改学习总结：")])]),o._v(" "),t("ol",[t("li",[t("p",[o._v("登录信息管理抽离：")]),o._v(" "),t("p",[o._v("用户信息的管理，都抽离到了vuex中action或者mutation中进行信息管理，解除了前端组件模板的耦合程序，当登录流程发生变化时，基本上不用再去修改组件内容，而是去修改store中的对应的action，这点非常好。")])])])])}),[],!1,null,null,null);t.default=i.exports}}]);